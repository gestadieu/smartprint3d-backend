<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SmartPrint3D Admin Panel - Orders</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.2/css/bulma.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
    link(rel="stylesheet", href="/styles/admin.css")
  </head>
  <body>
  <nav class="navbar is-danger" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href="http://smartprint3d.io:8082/admin">
      <img src="/images/logo-smartprint3d.jpg" alt="SmartPrint3D.io" height="28">
    </a>

    <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>
</nav>
  <section class="section">
    <div class="container">
      <h1 class="title">#{title} Orders</h1>
    </div>
    <div class="container">
      table(class="table is-striped is-fullwidth is-narrow")
        thead
          tr
            th Contact 
            th Order detail 
            th Status 
            th(colspan="2") Timeline
            th Action
        tbody
          each order in orders
            tr
              td(class="is-size-7")
                span #{order.email} 
                if order.email
                  br
                span #{order.mobile}

              td(class="is-size-7")
                each it in order.items
                  span #{it.qty} x 
                  span #{it.item} 
                  br

              td
                if order.status == 'ORDERED'
                  span(class="tag is-black")=order.status
                else if order.status == 'PRINTING'
                  span(class="tag")=order.status
                else if order.status == 'PRINTED'
                  span(class="tag is-info")=order.status
                else if order.status == 'DELIVERED'
                  span(class="tag is-success")=order.status  
              
              td(class="is-size-7")
                each ti in order.timeline 
                  span(class=(ti.status == 'ORDERED')? "has-text-black":(ti.status == 'PRINTING')?"has-text-dark":(ti.status == 'PRINTED')?"has-text-info":"has-text-success") #{ti.status} 
                  br
              td(class="is-size-7")
                each ti in order.timeline 
                  on
                  span #{ti.date.toDateString()} #{ti.date.getHours()}:#{ti.date.getMinutes()}
                  br

              td
                if order.status == 'ORDERED'
                  a(href=url_api + order._id +"/flag/printing" class="button is-light is-small") PRINTING
                else if order.status == 'PRINTING'
                  a(href=url_api + order._id +"/flag/printed" class="button is-light is-small") PRINTED
                //- else if order.status == 'PRINTED'
                //-   a(href=url_api + order._id +"/flag/delivered" class="button is-light is-small") DELIVERING
                 
    </div>

  </section>
  </body>
</html>
